{% extends 'base.html' %}
{% from 'host/common.html' import edit_field %}


{% macro schedule_migrate_gui() %}

  <div class="form-group ">
    <label class="col-sm-4 control-label" id="label_install_action" for="install_action">Install Action</label>
    <div class=col-sm-6>
      <select class="form-control" id="install_action" multiple name="install_action" style="width: 100%">
        <optgroup label="Migrate from IOS-XR to eXR">
          <option value="{{ install_action.premigrate }}">{{ install_action.premigrate}}</option>
          <option value="{{ install_action.migrate_system }}">{{ install_action.migrate_system}}</option>
          <option value="{{ install_action.postmigrate }}">{{ install_action.postmigrate}}</option>
          <option value="{{ install_action.allformigrate }}">Select All</option>
        </optgroup>
      </select>
    </div>
  </div>



<div class="form-group ">
  <label class="col-sm-4 control-label" for="{{ form.scheduled_time.name }}">{{ form.scheduled_time.label() }}</label>
  <div class="col-sm-6">
    <div  class="input-group date form_datetime">
      <input id="scheduled-time" name="{{ form.scheduled_time.name }}" class="form-control" size="16" type="text" readonly>
      <input id="scheduled-time-UTC" name="{{ form.scheduled_time_UTC.name }}" value="{{ form.scheduled_time_UTC.data }}" class="form-control" type="hidden">
      <span class="input-group-addon DodgerBlue"><span class="glyphicon glyphicon-calendar"></span></span>
    </div>
  </div>
</div>


<div class="form-group ">
  <label class="col-sm-4 control-label" for="label_single_or_batch">Batch Action?</label>
  <div class="col-sm-6">
      <input name="radio" type='hidden' value="No"/>
        <div class="btn-group" data-toggle="buttons">
          <button type="button" class="btn btn-default" data-radio-name="radio">Yes</button>
          <button type="button" class="btn btn-default active" data-radio-name="radio">No</button>
        </div>
  </div>
</div>



{% endmacro %}





{% block extra_head %}
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<title>Bootstrap Wizard by Creative Tim</title>

	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />


    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.css" rel="stylesheet">

    <link href="/static/migrate/gsdk-base.css" rel="stylesheet" />
	<!--   plugins 	 -->
	<script src="/static/migrate/jquery.bootstrap.wizard.js" type="text/javascript"></script>
	<script src="/static/migrate/wizard.js" type="text/javascript"></script>


<script src="/static/bootbox-4.2.0/js/bootbox.js"></script>
<script src="/static/datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
<link rel="stylesheet" href="/static/datetimepicker/css/bootstrap-datetimepicker.min.css">
<script src="/static/duallistbox/dist/dual-list-box.js"></script>
<script src="/static/jquery-cookie-master/jquery.cookie.js"></script>
<script src="/static/jquery/js/smu_info_dialog.js"></script>
<script src="/static/jquery-cookie-master/jquery.cookie.js"></script>

<style>
  .modal-dialog {
    width: 850px;
  }
  a:link, a:visited {
   text-decoration:none;
  }
</style>


<script type="text/javascript">
  $(function() {
      var current_filter = "";


      var PRE_MIGRATE = "{{ install_action.premigrate }}";
      var MIGRATE_SYSTEM_TO_EXR = "{{ install_action.migrate_system }}";
      var POST_MIGRATE = "{{ install_action.postmigrate }}";
      var ALL_FOR_MIGRATE = "{{ install_action.allformigrate }}";


      $("#install_action").select2({placeholder: 'Select Desirable Migration Actions'});
      $("#install_action").val("{{ form.install_action.data }}").trigger("change");


      var datetimepicker = $(".form_datetime").datetimepicker({
          format: "mm/dd/yyyy HH:ii P",
          showMeridian: true,
          autoclose: true,
          todayBtn: true,
          pickerPosition: "top-left",
          todayHighlight: true
      });

      toggle_ui();

      $('#install_action').on('change', function (e) {
          var install_actions = $(this).val();
          if (has_one_of_these(install_actions, [ALL_FOR_MIGRATE])) {
              $("#install_action").val([PRE_MIGRATE, MIGRATE_SYSTEM_TO_EXR, POST_MIGRATE]).trigger('change');
          }
          toggle_ui();
      });

      function has_one_of_these(install_actions, search_items) {
          if (install_actions != null) {
              for (i = 0; i < install_actions.length; i++) {
                  if ($.inArray(install_actions[i], search_items) > -1) {
                      return true;
                  }
              }
          }
          return false;
      }


      function toggle_ui() {
          var install_actions = $('#install_action').val()


      }

      server_time_as_locale_time = convertToLocaleString("{{ server_time | datetime_string }}");
      // Convert the UTC time to Locale time
      $('#scheduled-time-UTC').val(function (index, value) {
          if (value == 'None' || value.length == 0) {
              $('#scheduled-time').val(server_time_as_locale_time);
          } else {
              $('#scheduled-time').val(convertToLocaleString(value));
          }
      })
  })

  $('.btn[data-radio-name]').click(function() {
    $('.btn[data-radio-name="'+$(this).data('radioName')+'"]').removeClass('active');
    $('input[name="'+$(this).data('radioName')+'"]').val(
        $(this).text()
    );
  });



</script>


{% endblock extra_head %}






{% block main %}
<div class="row">
  <div class="well col-sm-offset-2 col-sm-8">
    <div class="form-horizontal">
      <legend>
        <h4>Schedule Migration</h4>
      </legend>

      {{ schedule_migrate_gui() }}

      <div class="btn col-sm-offset-5">
        <button id="on-submit" class="btn btn-primary" data-toggle="modal" data-target="#wizard-dialog">Continue
        </button>
        <button type="button" onClick="history.back(1);" class="btn btn-default">Cancel</button>
      </div>
    </div>
  </div>
</div>






<div id="wizard-dialog" class="modal" role="dialog">
  <div class="modal-dialog">
    <form method="post" class="form-horizontal">
    <div class="modal-content">

      <div class="modal-body">
        <!-- form id="form" method="post"  class="form-horizontal" -->
        <!--      Wizard container        -->
            <form id="form" method="post"  class="form-horizontal">
            <div class="card wizard-card ct-wizard-orange" id="wizard">

            <!--        You can switch "ct-wizard-orange"  with one of the next bright colors: "ct-wizard-blue", "ct-wizard-green", "ct-wizard-orange", "ct-wizard-red"             -->

                    <div class="wizard-header">
                        <h3>
                           <b>BUILD</b> YOUR PROFILE <br>
                           <small>This information will let us know more about you.</small>
                        </h3>
                    </div>
                    <ul id="tabs" class="nav nav-tabs" role="tablist">
                    </ul>
                    <div class="tab-content">



                    </div>
                    <div class="wizard-footer">
                            <div class="pull-right">
                                <input type='button' class='btn btn-next btn-fill btn-warning btn-wd btn-sm' name='next' value='Next' />
                                <input type='button' class='btn btn-finish btn-fill btn-warning btn-wd btn-sm' name='finish' value='Finish' />

                            </div>
                            <div class="pull-left">
                                <input type='button' class='btn btn-previous btn-fill btn-default btn-wd btn-sm' name='previous' value='Previous' />
                            </div>
                            <div class="clearfix"></div>
                    </div>
            </div>
            </form>
        <!-- wizard container -->
      </div>

        </div>
    </form>
  </div>
</div>


{% endblock main %}






